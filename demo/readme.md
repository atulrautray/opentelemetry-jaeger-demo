# Demo

The demo uses docker compose to spin up two simple Flask apps that have been auto instrumented with Opentelemetry and can communicate with each other. It also starts the jaeger-all-in-one image which includes the jaeger agent, collector, query and UI.

## Running the Project

### Dependencies

* Docker
* Docker Compose

### Executing program

* To run the demo, make sure you are in the demo directory and use the following command. The app should run and produce logs from app1, app2 and jaeger.
```
docker compose up
```
* To stop the deployment, simply press CTRL+C. To remove the stopped docker containers, use the following command
```
docker compose down
```

## Generating Traces

* Once the containers are running, the two Flask apps can be accessed on these endpoints. Sending requests (using curl or the browser) to these endpoints will generate spans which can be viewed in the jaeger UI.
  * `localhost:5000`, `localhost:5000/todo`, `localhost:5000/todo/<id_no>` (<\id_no> is the id of todo list item) for app1
  * `localhost:5001/user/profile` for app2
  ```
curl localhost:5000
curl localhost:5000/todo
curl localhost:5000/30
curl localhost:5000/5
curl localhost:5001/user/profile
```
* Note - `localhost:5000/todo/5` will give a 404 error, this is demonstrate how error requests can be easily found using jaeger UI's filters.

* After sending a few requests, the spans generated by the apps should be visible on the jaeger UI, which shouldbe accessible on the following endpoint.
  * localhost:16686